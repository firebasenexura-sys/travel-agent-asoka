(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,12156,e=>{"use strict";var a=e.i(43476),l=e.i(71645),s=e.i(22016),t=e.i(18566),r=e.i(33842);e.i(51718);var i=e.i(18357);e.i(36180);var n=e.i(98925);function o({message:e,type:s,onDone:t}){return(0,l.useEffect)(()=>{let e=setTimeout(t,3e3);return()=>clearTimeout(e)},[t]),(0,a.jsx)("div",{className:`fixed top-5 left-1/2 -translate-x-1/2 p-4 rounded-lg shadow-lg text-white ${"success"===s?"bg-green-600":"bg-red-600"} z-50`,children:e})}function d({text:e="Memuat..."}){return(0,a.jsx)("div",{className:"fixed inset-0 bg-white/80 z-[60] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-600 rounded-full animate-spin"}),(0,a.jsx)("p",{className:"mt-2 text-gray-700 font-semibold",children:e})]})})}let c=[{value:"star",label:"Bintang (star)"},{value:"check-circle",label:"Ceklis Lingkaran (check-circle)"},{value:"thumbs-up",label:"Jempol (thumbs-up)"},{value:"award",label:"Penghargaan (award)"},{value:"heart",label:"Hati (heart)"},{value:"shield-alt",label:"Perisai/Keamanan (shield-alt)"},{value:"gem",label:"Permata/Kualitas (gem)"},{value:"medal",label:"Medali (medal)"},{value:"certificate",label:"Sertifikat (certificate)"},{value:"map-marker-alt",label:"Penanda Peta (map-marker-alt)"},{value:"car",label:"Mobil (car)"},{value:"bus",label:"Bus (bus)"},{value:"route",label:"Rute/Perjalanan (route)"},{value:"suitcase-rolling",label:"Koper (suitcase-rolling)"},{value:"mountain",label:"Gunung (mountain)"},{value:"tree",label:"Pohon/Alam (tree)"},{value:"umbrella-beach",label:"Payung Pantai (umbrella-beach)"},{value:"camera-retro",label:"Kamera Retro (camera-retro)"},{value:"users",label:"Tim/Grup (users)"},{value:"headset",label:"Dukungan/CS (headset)"},{value:"comments",label:"Testimoni/Chat (comments)"},{value:"calendar-check",label:"Jadwal/Booking (calendar-check)"},{value:"handshake",label:"Kerjasama/Partner (handshake)"},{value:"concierge-bell",label:"Layanan/Hotel (concierge-bell)"},{value:"dollar-sign",label:"Harga/Dollar (dollar-sign)"},{value:"wallet",label:"Dompet/Pembayaran (wallet)"},{value:"tags",label:"Diskon/Tag (tags)"},{value:"clock",label:"Waktu/Durasi (clock)"},{value:"wifi",label:"Wifi (wifi)"},{value:"utensils",label:"Makan/Restoran (utensils)"}];function u(){let e=(0,t.useRouter)(),[u,m]=(0,l.useState)(null),[b,h]=(0,l.useState)(!0),[g,x]=(0,l.useState)(!1),[p,f]=(0,l.useState)(null),[y,v]=(0,l.useState)([]),[j,w]=(0,l.useState)(!1),[N,k]=(0,l.useState)(null),[P,S]=(0,l.useState)("star"),[T,C]=(0,l.useState)(""),[D,K]=(0,l.useState)(""),U=(0,n.collection)(r.db,"whyUsPoints");(0,l.useEffect)(()=>{let a=(0,i.onAuthStateChanged)(r.auth,a=>{a?m(a.uid):e.push("/admin")}),l=()=>{};if(u){0!==y.length||j||h(!0);let e=(0,n.query)(U,(0,n.orderBy)("createdAt","asc"));l=(0,n.onSnapshot)(e,e=>{v(e.docs.map(e=>({id:e.id,...e.data()}))),h(!1)},e=>{console.error("Gagal mengambil data Why Us:",e),f({msg:"Gagal memuat data.",type:"error"}),h(!1)})}else h(!1);return()=>{a(),l()}},[e,u,j]);let A=()=>{k(null),S("star"),C(""),K("")},B=()=>{g||(A(),w(!1))},G=async e=>{if(e.preventDefault(),!u||!T)return void f({msg:"Judul poin wajib diisi.",type:"error"});if(!P)return void f({msg:"Ikon wajib dipilih.",type:"error"});x(!0),f(null);try{let e={icon:P,title:T,description:D,updatedAt:(0,n.serverTimestamp)()};if(N){let a=(0,n.doc)(r.db,"whyUsPoints",N);await (0,n.updateDoc)(a,e),console.log("Poin Why Us diupdate:",N)}else{let a=await (0,n.addDoc)(U,{...e,createdAt:(0,n.serverTimestamp)()});console.log("Poin Why Us baru ditambahkan:",a.id)}f({msg:"Poin 'Kenapa Asoka?' berhasil disimpan!",type:"success"}),B()}catch(e){console.error("Gagal menyimpan poin:",e),f({msg:`Gagal menyimpan: ${e.message||e.code}`,type:"error"})}finally{x(!1)}},M=async e=>{if(confirm(`Yakin ingin menghapus poin "${e.title}"?`)){x(!0),f(null);try{await (0,n.deleteDoc)((0,n.doc)(r.db,"whyUsPoints",e.id)),console.log("Dokumen Why Us dihapus:",e.id),f({msg:"Poin berhasil dihapus.",type:"success"})}catch(e){console.error("Gagal menghapus poin:",e),f({msg:`Gagal menghapus: ${e.message||e.code}`,type:"error"})}finally{x(!1)}}};return(0,a.jsxs)(a.Fragment,{children:[p&&(0,a.jsx)(o,{message:p.msg,type:p.type,onDone:()=>f(null)}),b&&(0,a.jsx)(d,{text:"Memuat data..."}),g&&(0,a.jsx)(d,{text:"Menyimpan/Menghapus..."}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(s.default,{href:"/dashboard/cms",children:(0,a.jsxs)("span",{className:"text-gray-500 hover:text-blue-600 cursor-pointer",children:[(0,a.jsx)("i",{className:"fas fa-arrow-left mr-2"}),"Kembali ke Hpanel"]})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit 'Kenapa Asoka?'"})]}),(0,a.jsxs)("button",{onClick:()=>{A(),w(!0)},className:"bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-blue-700 transition-all flex items-center gap-2",children:[(0,a.jsx)("i",{className:"fas fa-plus"})," Tambah Poin"]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-gray-800 border-b border-gray-200 pb-3 mb-4",children:[(0,a.jsx)("i",{className:"fas fa-heart mr-2 text-yellow-500"})," Poin Keunggulan"]}),b?(0,a.jsx)("p",{className:"text-center py-6 text-gray-500",children:"Memuat..."}):y.length>0?(0,a.jsx)("ul",{className:"space-y-4",children:y.map(e=>(0,a.jsxs)("li",{className:"flex items-start gap-4 p-4 border border-gray-100 rounded-lg bg-gray-50 group hover:bg-white hover:shadow-md transition-all",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-yellow-100 text-yellow-600 flex items-center justify-center mt-1",children:(0,a.jsx)("i",{className:`fas fa-${e.icon||"star"}`})}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("h4",{className:"font-bold text-gray-800",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-0.5",children:e.description})]}),(0,a.jsxs)("div",{className:"flex-shrink-0 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity focus-within:opacity-100",children:[(0,a.jsx)("button",{onClick:()=>{A(),k(e.id),S(e.icon||"star"),C(e.title),K(e.description),w(!0)},className:"text-blue-600 hover:text-blue-800 text-sm font-medium p-1 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Edit",children:(0,a.jsx)("i",{className:"fas fa-edit"})}),(0,a.jsx)("button",{onClick:()=>M(e),className:"text-red-600 hover:text-red-800 text-sm font-medium p-1 rounded focus:outline-none focus:ring-2 focus:ring-red-500",title:"Hapus",children:(0,a.jsx)("i",{className:"fas fa-trash"})})]})]},e.id))}):(0,a.jsx)("p",{className:"text-center text-gray-500 py-10",children:'Belum ada poin keunggulan. Klik "Tambah Poin" untuk memulai.'})]}),j&&(0,a.jsxs)("div",{className:"fixed inset-0 bg-black/50 z-40 flex items-center justify-center p-4",children:[(0,a.jsx)("div",{onClick:B,className:"absolute inset-0"}),(0,a.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-5 border-b border-gray-200 sticky top-0 bg-white rounded-t-2xl z-10",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:N?"Edit Poin Keunggulan":"Tambah Poin Baru"}),(0,a.jsx)("button",{onClick:B,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)("i",{className:"fas fa-times fa-lg"})})]}),(0,a.jsxs)("form",{id:"whyUsForm",onSubmit:G,className:"flex-grow overflow-y-auto p-6 space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"pointIconSelect",className:"block text-sm font-medium text-gray-700 mb-1",children:"Pilih Ikon"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center justify-center w-10 h-10 rounded-md bg-gray-100 border border-gray-300",children:(0,a.jsx)("i",{className:`fas fa-${P||"star"} text-gray-600`})}),(0,a.jsx)("select",{id:"pointIconSelect",value:P,onChange:e=>S(e.target.value),required:!0,className:"w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500 bg-white",children:c.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"pointTitle",className:"block text-sm font-medium text-gray-700 mb-1",children:"Judul Poin"}),(0,a.jsx)("input",{id:"pointTitle",type:"text",value:T,onChange:e=>C(e.target.value),required:!0,className:"w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"pointDescription",className:"block text-sm font-medium text-gray-700 mb-1",children:"Deskripsi Singkat"}),(0,a.jsx)("textarea",{id:"pointDescription",value:D,onChange:e=>K(e.target.value),rows:4,className:"w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Jelaskan keunggulan ini secara singkat..."})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end p-5 border-t border-gray-200 sticky bottom-0 bg-gray-50 rounded-b-2xl z-10",children:[(0,a.jsx)("button",{onClick:B,type:"button",className:"bg-white text-gray-700 font-semibold py-2 px-4 rounded-lg border border-gray-300 mr-3 hover:bg-gray-50",children:"Batal"}),(0,a.jsxs)("button",{type:"submit",form:"whyUsForm",disabled:g,className:"bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[g?(0,a.jsx)("i",{className:"fas fa-spinner fa-spin"}):(0,a.jsx)("i",{className:"fas fa-save"}),N?"Update Poin":"Simpan Poin"]})]})]})]})]})}e.s(["default",()=>u])}]);