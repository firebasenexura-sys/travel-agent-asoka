(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,81251,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(22016),r=e.i(18566),l=e.i(33842);e.i(51718);var o=e.i(18357);e.i(36180);var i=e.i(98925);e.i(61086);var d=e.i(27215);function n({message:e,type:s,onDone:r}){return(0,t.useEffect)(()=>{let e=setTimeout(r,3e3);return()=>clearTimeout(e)},[r]),(0,a.jsx)("div",{className:`fixed top-5 left-1/2 -translate-x-1/2 p-4 rounded-lg shadow-lg text-white ${"success"===s?"bg-green-600":"bg-red-600"} z-50`,children:e})}function c({text:e="Memuat..."}){return(0,a.jsx)("div",{className:"fixed inset-0 bg-white/80 z-[60] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-600 rounded-full animate-spin"}),(0,a.jsx)("p",{className:"mt-2 text-gray-700 font-semibold",children:e})]})})}function m(){let e=(0,r.useRouter)(),[m,g]=(0,t.useState)(null),[u,b]=(0,t.useState)(!0),[h,x]=(0,t.useState)(!1),[f,p]=(0,t.useState)(null),[y,j]=(0,t.useState)("Asoka Trip"),[v,N]=(0,t.useState)(""),[w,k]=(0,t.useState)(""),[S,T]=(0,t.useState)(null),[U,C]=(0,t.useState)(null),[F,L]=(0,t.useState)(null),[A,M]=(0,t.useState)([]),[R,P]=(0,t.useState)([]),[$,I]=(0,t.useState)([]),[E,D]=(0,t.useState)(""),[B,G]=(0,t.useState)(""),[H,K]=(0,t.useState)(""),[O,_]=(0,t.useState)(""),[W,z]=(0,t.useState)(""),[J,q]=(0,t.useState)(""),[Q,V]=(0,t.useState)(""),X=(0,i.doc)(l.db,"settings","landingPage");(0,t.useEffect)(()=>{let a=(0,o.onAuthStateChanged)(l.auth,a=>{a?(g(a.uid),t()):e.push("/admin")}),t=async()=>{b(!0);try{let e=await (0,i.getDoc)(X);if(e.exists()){let a=e.data();j(a.siteName||"Asoka Trip"),N(a.heroTitle||""),k(a.heroSubtitle||""),C(a.logoUrl||null),L(a.logoUrl||null),P(a.heroImages||[]),I(a.heroImages||[]),D(a.socialInstagram||""),G(a.socialFacebook||""),K(a.socialTiktok||""),_(a.contactAddress||""),z(a.contactPhone||""),q(a.contactEmail||""),V(a.aboutText||"")}else j("Asoka Trip")}catch(e){console.error("Gagal mengambil data CMS:",e),p({msg:"Gagal memuat data CMS.",type:"error"})}finally{b(!1)}};return()=>a()},[e]);let Y=async e=>{if(e.preventDefault(),!m)return void p({msg:"Error: User tidak terautentikasi.",type:"error"});if(!y.trim())return void p({msg:"Nama Website wajib diisi.",type:"error"});x(!0),p(null);try{let e=F||"",a=[];if(S){if(F)try{await (0,d.deleteObject)((0,d.ref)(l.storage,F))}catch(e){"storage/object-not-found"!==e.code&&console.warn("Gagal hapus logo lama:",e)}let a=`${m}_logo_${Date.now()}_${S.name}`,t=(0,d.ref)(l.storage,`settings/${a}`),s=await (0,d.uploadBytes)(t,S);e=await (0,d.getDownloadURL)(s.ref),L(e),T(null)}let t=R.filter(e=>e.startsWith("https://")),s=A.filter(e=>R.includes(e.previewUrl));if(s.length>0){p({msg:`Mengupload ${s.length} gambar slider...`,type:"info"});let e=s.map(async e=>{let a=`${m}_hero_${Date.now()}_${e.file.name}`,t=(0,d.ref)(l.storage,`settings/hero_slider/${a}`),s=await (0,d.uploadBytes)(t,e.file);return await (0,d.getDownloadURL)(s.ref)}),r=await Promise.all(e);a=[...t,...r]}else a=t;let r=$.filter(e=>!a.includes(e));if(r.length>0){console.log("Menghapus slider lama:",r);let e=r.map(async e=>{try{await (0,d.deleteObject)((0,d.ref)(l.storage,e))}catch(e){"storage/object-not-found"!==e.code&&console.warn("Gagal hapus slider lama:",e)}});await Promise.all(e)}I(a),M([]);let o={siteName:y.trim(),heroTitle:v,heroSubtitle:w,logoUrl:e,heroImages:a,socialInstagram:E,socialFacebook:B,socialTiktok:H,contactAddress:O,contactPhone:W,contactEmail:J,aboutText:Q,updatedAt:(0,i.serverTimestamp)()};await (0,i.setDoc)(X,o,{merge:!0}),p({msg:"Pengaturan Landing Page berhasil disimpan!",type:"success"})}catch(e){console.error("Gagal menyimpan data CMS:",e),p({msg:`Gagal menyimpan data CMS: ${e.message}`,type:"error"})}finally{x(!1)}};return(0,a.jsxs)(a.Fragment,{children:[f&&(0,a.jsx)(n,{message:f.msg,type:f.type,onDone:()=>p(null)}),u&&(0,a.jsx)(c,{text:"Memuat data..."}),h&&(0,a.jsx)(c,{text:"Menyimpan..."}),(0,a.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[" ",(0,a.jsxs)(s.default,{href:"/dashboard/cms",children:[" ",(0,a.jsxs)("span",{className:"text-gray-500 hover:text-blue-600 cursor-pointer",children:[" ",(0,a.jsx)("i",{className:"fas fa-arrow-left mr-2"}),"Kembali "]})," "]})," ",(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Landing Page"})," "]})}),(0,a.jsxs)("form",{onSubmit:Y,className:"space-y-8",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-gray-800 border-b border-gray-200 pb-3 mb-4",children:[(0,a.jsx)("i",{className:"fas fa-cog mr-2 text-gray-500"})," Pengaturan Umum"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"siteName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Website (Header)"}),(0,a.jsx)("input",{id:"siteName",type:"text",value:y,onChange:e=>j(e.target.value),required:!0,className:"w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Nama website Anda"})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-gray-800 border-b border-gray-200 pb-3 mb-4",children:[(0,a.jsx)("i",{className:"fas fa-pager mr-2 text-indigo-500"})," Section Hero & Header Logo"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("label",{htmlFor:"heroTitle",className:"block text-sm font-medium text-gray-700 mb-1",children:"Judul Hero"})," ",(0,a.jsx)("input",{id:"heroTitle",type:"text",value:v,onChange:e=>N(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg shadow-sm"})," "]}),(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("label",{htmlFor:"heroSubtitle",className:"block text-sm font-medium text-gray-700 mb-1",children:"Sub-Judul Hero"})," ",(0,a.jsx)("input",{id:"heroSubtitle",type:"text",value:w,onChange:e=>k(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg shadow-sm"})," "]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Logo Header (Maks 1MB)"}),U?(0,a.jsx)("img",{src:U,alt:"Logo preview",className:"h-16 w-auto object-contain border border-gray-200 rounded-lg p-1 bg-gray-50 mb-2"}):(0,a.jsx)("div",{className:"h-16 w-40 flex items-center justify-center border border-dashed border-gray-300 rounded-lg bg-gray-50 text-gray-400 mb-2",children:"Logo Preview"}),(0,a.jsx)("input",{id:"logoFile",type:"file",accept:"image/png, image/jpeg, image/webp, image/svg+xml",onChange:e=>{let a=e.target.files?.[0];if(a){if(a.size>1048576)return void p({msg:"Ukuran logo maksimal 1 MB.",type:"error"});T(a),C(URL.createObjectURL(a))}},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]})]}),(0,a.jsxs)("div",{className:"mt-8 pt-4 border-t border-gray-200",children:[(0,a.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:[(0,a.jsx)("i",{className:"fas fa-images mr-2 text-red-500"})," Gambar Slider Hero (Maks 5 Foto)"]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"grid grid-cols-5 gap-3",children:[R.map((e,t)=>(0,a.jsxs)("div",{className:"relative aspect-video rounded-lg overflow-hidden group",children:[(0,a.jsx)("img",{src:e,alt:`Slider ${t}`,className:"w-full h-full object-cover"}),(0,a.jsx)("button",{type:"button",onClick:()=>(e=>{let a=R[e];if(P(R.filter((a,t)=>t!==e)),a.startsWith("blob:")){M(A.filter(e=>e.previewUrl!==a));try{URL.revokeObjectURL(a)}catch(e){console.warn("Could not revoke blob URL:",e)}}})(t),className:"absolute top-1 right-1 bg-red-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition shadow",children:"Ã—"})]},e)),R.length<5&&(0,a.jsx)("label",{htmlFor:"sliderImages",className:"cursor-pointer aspect-video flex items-center justify-center border-2 border-dashed border-gray-300 rounded-lg text-gray-400 hover:border-blue-500 hover:text-blue-500 transition",children:(0,a.jsx)("i",{className:"fas fa-plus fa-lg"})})]}),(0,a.jsx)("input",{id:"sliderImages",type:"file",accept:"image/jpeg,image/png,image/webp",multiple:!0,onChange:e=>{let a=e.target.files;if(a){let t=Array.from(a),s=5-(R.filter(e=>e.startsWith("https://")).length+A.length);t.length>s&&p({msg:`Maksimal ${s} foto lagi (total maks 5).`,type:"error"});let r=t.slice(0,s),l=[],o=[];for(let e of r){if(e.size>2097152){p({msg:`File "${e.name}" terlalu besar (maks 2 MB).`,type:"error"});continue}let a=URL.createObjectURL(e);l.push({file:e,previewUrl:a}),o.push(a)}M(e=>[...e,...l]),P(e=>[...e,...o]),e.target.value=""}},disabled:R.length>=5,className:"hidden"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-gray-800 border-b border-gray-200 pb-3 mb-4",children:[" ",(0,a.jsx)("i",{className:"fas fa-share-alt mr-2 text-green-500"})," Sosial Media "]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("label",{htmlFor:"socialInstagram",className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Instagram"})," ",(0,a.jsx)("input",{id:"socialInstagram",type:"url",value:E,onChange:e=>D(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg shadow-sm",placeholder:"https://instagram.com/..."})," "]}),(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("label",{htmlFor:"socialFacebook",className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Facebook"})," ",(0,a.jsx)("input",{id:"socialFacebook",type:"url",value:B,onChange:e=>G(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg shadow-sm",placeholder:"https://facebook.com/..."})," "]}),(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("label",{htmlFor:"socialTiktok",className:"block text-sm font-medium text-gray-700 mb-1",children:"URL TikTok"})," ",(0,a.jsx)("input",{id:"socialTiktok",type:"url",value:H,onChange:e=>K(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg shadow-sm",placeholder:"https://tiktok.com/@..."})," "]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-gray-800 border-b border-gray-200 pb-3 mb-4",children:[" ",(0,a.jsx)("i",{className:"fas fa-address-card mr-2 text-purple-500"})," Informasi Kontak "]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("label",{htmlFor:"contactPhone",className:"block text-sm font-medium text-gray-700 mb-1",children:"No. Telepon/WA"})," ",(0,a.jsx)("input",{id:"contactPhone",type:"tel",value:W,onChange:e=>z(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg shadow-sm",placeholder:"+62..."})," "]}),(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("label",{htmlFor:"contactEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Alamat Email"})," ",(0,a.jsx)("input",{id:"contactEmail",type:"email",value:J,onChange:e=>q(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg shadow-sm",placeholder:"info@..."})," "]}),(0,a.jsxs)("div",{className:"md:col-span-3",children:[" ",(0,a.jsx)("label",{htmlFor:"contactAddress",className:"block text-sm font-medium text-gray-700 mb-1",children:"Alamat Kantor/Lokasi"})," ",(0,a.jsx)("textarea",{id:"contactAddress",value:O,onChange:e=>_(e.target.value),rows:3,className:"w-full p-3 border border-gray-300 rounded-lg shadow-sm",placeholder:"Alamat lengkap..."})," "]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-gray-800 border-b border-gray-200 pb-3 mb-4",children:[" ",(0,a.jsx)("i",{className:"fas fa-info-circle mr-2 text-yellow-500"})," Tentang Kami (About Us) "]}),(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("label",{htmlFor:"aboutText",className:"block text-sm font-medium text-gray-700 mb-1",children:"Teks Tentang Kami"})," ",(0,a.jsx)("textarea",{id:"aboutText",value:Q,onChange:e=>V(e.target.value),rows:6,className:"w-full p-3 border border-gray-300 rounded-lg shadow-sm",placeholder:"Jelaskan tentang Asoka Trip..."})," "]})]}),(0,a.jsx)("div",{className:"sticky bottom-0 -mx-8 -mb-8 mt-8 px-8 py-4 bg-gray-100/80 backdrop-blur-sm border-t border-gray-200 flex justify-end",children:(0,a.jsxs)("button",{type:"submit",disabled:h||u,className:"bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[" ",h?(0,a.jsx)("i",{className:"fas fa-spinner fa-spin"}):(0,a.jsx)("i",{className:"fas fa-save"})," Simpan Perubahan "]})})]})]})}e.s(["default",()=>m])}]);