(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,50371,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(22016),l=e.i(18566),r=e.i(33842);e.i(51718);var i=e.i(18357);e.i(36180);var n=e.i(98925);function o({message:e,type:t,onDone:l}){return(0,s.useEffect)(()=>{let e=setTimeout(l,3e3);return()=>clearTimeout(e)},[l]),(0,a.jsx)("div",{className:`fixed top-5 left-1/2 -translate-x-1/2 p-4 rounded-lg shadow-lg text-white ${"success"===t?"bg-green-600":"bg-red-600"} z-50`,children:e})}function d({text:e="Memuat..."}){return(0,a.jsx)("div",{className:"fixed inset-0 bg-white/80 z-[60] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-600 rounded-full animate-spin"}),(0,a.jsx)("p",{className:"mt-2 text-gray-700 font-semibold",children:e})]})})}let c=[{value:"question-circle",label:"Tanda Tanya Lingkaran (question-circle)"},{value:"info-circle",label:"Info Lingkaran (info-circle)"},{value:"comment-dots",label:"Balon Chat Titik (comment-dots)"},{value:"comments",label:"Balon Chat Banyak (comments)"},{value:"book-open",label:"Buku Terbuka (book-open)"},{value:"lightbulb",label:"Lampu Bohlam (lightbulb)"},{value:"headset",label:"Headset/Support (headset)"},{value:"check",label:"Ceklis (check)"},{value:"star",label:"Bintang (star)"}];function u(){let e=(0,l.useRouter)(),[u,m]=(0,s.useState)(null),[x,b]=(0,s.useState)(!0),[f,h]=(0,s.useState)(!1),[g,p]=(0,s.useState)(null),[y,j]=(0,s.useState)([]),[v,N]=(0,s.useState)(null),[w,k]=(0,s.useState)(!1),[q,A]=(0,s.useState)(null),[F,Q]=(0,s.useState)("question-circle"),[S,C]=(0,s.useState)(""),[T,B]=(0,s.useState)(""),$=(0,n.collection)(r.db,"faqs");(0,s.useEffect)(()=>{let a=(0,i.onAuthStateChanged)(r.auth,a=>{a?m(a.uid):e.push("/admin")}),s=()=>{};if(u){0!==y.length||w||b(!0);let e=(0,n.query)($,(0,n.orderBy)("createdAt","asc"));s=(0,n.onSnapshot)(e,e=>{j(e.docs.map(e=>({id:e.id,...e.data()}))),b(!1)},e=>{console.error("Gagal mengambil data FAQ:",e),p({msg:"Gagal memuat data FAQ.",type:"error"}),b(!1)})}else b(!1);return()=>{a(),s()}},[e,u,w]);let D=()=>{A(null),Q("question-circle"),C(""),B("")},G=()=>{f||(D(),k(!1))},P=async e=>{if(e.preventDefault(),!u||!S||!T||!F)return void p({msg:"Ikon, Pertanyaan, dan Jawaban wajib diisi.",type:"error"});h(!0),p(null);try{let e={icon:F,question:S,answer:T,updatedAt:(0,n.serverTimestamp)()};if(q){let a=(0,n.doc)(r.db,"faqs",q);await (0,n.updateDoc)(a,e),console.log("FAQ diupdate:",q)}else{let a=await (0,n.addDoc)($,{...e,createdAt:(0,n.serverTimestamp)()});console.log("FAQ baru ditambahkan:",a.id)}p({msg:"FAQ berhasil disimpan!",type:"success"}),G()}catch(e){console.error("Gagal menyimpan FAQ:",e),p({msg:`Gagal menyimpan: ${e.message||e.code}`,type:"error"})}finally{h(!1)}},z=async e=>{if(confirm(`Yakin ingin menghapus FAQ "${e.question}"?`)){h(!0),p(null);try{await (0,n.deleteDoc)((0,n.doc)(r.db,"faqs",e.id)),console.log("Dokumen FAQ dihapus:",e.id),p({msg:"FAQ berhasil dihapus.",type:"success"})}catch(e){console.error("Gagal menghapus FAQ:",e),p({msg:`Gagal menghapus: ${e.message||e.code}`,type:"error"})}finally{h(!1)}}};return(0,a.jsxs)(a.Fragment,{children:[g&&(0,a.jsx)(o,{message:g.msg,type:g.type,onDone:()=>p(null)}),x&&(0,a.jsx)(d,{text:"Memuat FAQ..."}),f&&(0,a.jsx)(d,{text:"Menyimpan/Menghapus..."}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(t.default,{href:"/dashboard/cms",children:(0,a.jsxs)("span",{className:"text-gray-500 hover:text-blue-600 cursor-pointer",children:[(0,a.jsx)("i",{className:"fas fa-arrow-left mr-2"}),"Kembali ke Hpanel"]})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Kelola FAQ"})]}),(0,a.jsxs)("button",{onClick:()=>{D(),k(!0)},className:"bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-blue-700 transition-all flex items-center gap-2",children:[(0,a.jsx)("i",{className:"fas fa-plus"})," Tambah FAQ"]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-gray-800 border-b border-gray-200 pb-3 mb-4",children:[(0,a.jsx)("i",{className:"fas fa-question-circle mr-2 text-blue-500"})," Daftar Pertanyaan Umum"]}),x?(0,a.jsx)("p",{className:"text-center py-6 text-gray-500",children:"Memuat..."}):y.length>0?(0,a.jsx)("div",{className:"space-y-3",children:y.map((e,s)=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,a.jsxs)("button",{onClick:()=>{N(v===s?null:s)},className:"w-full flex justify-between items-center p-4 bg-gray-50 hover:bg-gray-100 focus:outline-none",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-md bg-blue-100 text-blue-600 flex-shrink-0",children:(0,a.jsx)("i",{className:`fas fa-${e.icon||"question-circle"}`})}),(0,a.jsx)("span",{className:"font-medium text-left text-gray-800",children:e.question})]}),(0,a.jsx)("i",{className:`fas fa-chevron-down transition-transform duration-200 text-gray-500 ${v===s?"rotate-180":""}`})]}),(0,a.jsx)("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${v===s?"max-h-96":"max-h-0"}`,children:(0,a.jsxs)("div",{className:"p-4 border-t border-gray-200 bg-white space-y-3",children:[(0,a.jsx)("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:e.answer}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,a.jsxs)("button",{onClick:()=>{D(),A(e.id),Q(e.icon||"question-circle"),C(e.question),B(e.answer),k(!0)},className:"text-blue-600 hover:text-blue-800 text-sm font-medium p-1 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Edit",children:[(0,a.jsx)("i",{className:"fas fa-edit"})," Edit"]}),(0,a.jsxs)("button",{onClick:()=>z(e),className:"text-red-600 hover:text-red-800 text-sm font-medium p-1 rounded focus:outline-none focus:ring-2 focus:ring-red-500",title:"Hapus",children:[(0,a.jsx)("i",{className:"fas fa-trash"})," Hapus"]})]})]})})]},e.id))}):(0,a.jsx)("p",{className:"text-center text-gray-500 py-10",children:'Belum ada FAQ. Klik "Tambah FAQ" untuk memulai.'})]}),w&&(0,a.jsxs)("div",{className:"fixed inset-0 bg-black/50 z-40 flex items-center justify-center p-4",children:[(0,a.jsx)("div",{onClick:G,className:"absolute inset-0"}),(0,a.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-5 border-b border-gray-200 sticky top-0 bg-white rounded-t-2xl z-10",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:q?"Edit FAQ":"Tambah FAQ Baru"}),(0,a.jsx)("button",{onClick:G,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)("i",{className:"fas fa-times fa-lg"})})]}),(0,a.jsxs)("form",{id:"faqForm",onSubmit:P,className:"flex-grow overflow-y-auto p-6 space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"faqIconSelect",className:"block text-sm font-medium text-gray-700 mb-1",children:"Pilih Ikon"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center justify-center w-10 h-10 rounded-md bg-gray-100 border border-gray-300",children:(0,a.jsx)("i",{className:`fas fa-${F||"question-circle"} text-gray-600`})}),(0,a.jsx)("select",{id:"faqIconSelect",value:F,onChange:e=>Q(e.target.value),required:!0,className:"w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500 bg-white",children:c.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"faqQuestion",className:"block text-sm font-medium text-gray-700 mb-1",children:"Pertanyaan"}),(0,a.jsx)("input",{id:"faqQuestion",type:"text",value:S,onChange:e=>C(e.target.value),required:!0,className:"w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"faqAnswer",className:"block text-sm font-medium text-gray-700 mb-1",children:"Jawaban"}),(0,a.jsx)("textarea",{id:"faqAnswer",value:T,onChange:e=>B(e.target.value),rows:8,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Tuliskan jawaban di sini..."})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end p-5 border-t border-gray-200 sticky bottom-0 bg-gray-50 rounded-b-2xl z-10",children:[(0,a.jsx)("button",{onClick:G,type:"button",className:"bg-white text-gray-700 font-semibold py-2 px-4 rounded-lg border border-gray-300 mr-3 hover:bg-gray-50",children:"Batal"}),(0,a.jsxs)("button",{type:"submit",form:"faqForm",disabled:f,className:"bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[f?(0,a.jsx)("i",{className:"fas fa-spinner fa-spin"}):(0,a.jsx)("i",{className:"fas fa-save"}),q?"Update FAQ":"Simpan FAQ"]})]})]})]})]})}e.s(["default",()=>u])}]);